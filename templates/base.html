{# templates/base.html #}
{% load i18n %}

<!DOCTYPE html>
<html>
<head>
    <title>{% trans "Welcome to" %} {{ project_name }}</title>
</head>
<body>
    <header>
        {% block header %}
            <!-- Language switcher wrapped in a container -->
            <div class="language-switcher">
                {% include 'shared/form_language_switcher.html' %}
            </div>
            
            <nav>
                <a href="{% url 'home' %}">{% trans "Home" %}</a> 
                
                <!-- Include the page list -->
                {% include 'pages/_page_list_partial.html' %}
                
                <!-- Authentication links -->
                {% if user.is_authenticated %}
                    <p>{% trans "Welcome" %} {{ user.username }}!</p>
                    <form method="post" action="{% url 'logout' %}" class="logout-form">
                        {% csrf_token %}
                        <button type="submit">{% trans "Logout" %}</button>
                    </form>
                    
                    <!-- Link to Profile Edit and Profile view based on USE_UUID_FOR_PROFILE_URL -->
                    <a href="{% if USE_UUID_FOR_PROFILE_URL %}{% url 'profile_edit' uuid=user.uuid %}{% else %}{% url 'profile_edit' username=user.username %}{% endif %}">
                        {% trans "Edit Profile" %}
                    </a>
                    <a href="{% if USE_UUID_FOR_PROFILE_URL %}{% url 'profile_view' uuid=user.uuid %}{% else %}{% url 'profile_view' username=user.username %}{% endif %}">
                        {% trans "Profile" %}
                    </a>
                {% else %}
                    <a href="{% url 'register' %}">{% trans "Register" %}</a>
                    <a href="{% url 'login' %}">{% trans "Login" %}</a>
                {% endif %}
            </nav>
        {% endblock %}
    </header>

    {% if messages %}
        <div class="messages-container">
            <ul class="messages">
                {% for message in messages %}
                    <li class="{{ message.tags|default:'info' }}">{{ message }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer>
        {% block footer %}
            <!-- Optional footer content goes here -->
        {% endblock %}
    </footer>

</body>
</html>
